<div class="profile-card" *ngIf="user">
  <div class="profile-row">
    <div>
      <p class="label">Username</p>
      <p class="value username">{{ user.name }}</p>
    </div>
    
  </div>

  <div class="profile-row">
    <div>
      <p class="label">Email</p>
      <p class="value">{{ user.email }}</p>
    </div>
  </div>
  <button class="button-75 edit-btn" (click)="openEdit()">Edit</button>
</div>

<button class="button-75 change-password-btn" (click)="openChangePassword()">
  Change password
</button>

<nz-modal
  [(nzVisible)]="isEditModalVisible"
  nzTitle="Edit profile"
  (nzOnCancel)="cancelEdit()"
  (nzOnOk)="saveEdit()"
>
<form #userForm="ngForm" novalidate>
  <ng-container *nzModalContent>
    <label>Username <span class="required">*</span> </label>
    <input nz-input [(ngModel)]="editForm.name" required #name="ngModel"/>
    <div class="error" *ngIf="name.invalid && (name.touched || formSubmitted)">
          Name is required
    </div>

    <label>Email <span class="required">*</span></label>
    <input nz-input [(ngModel)]="editForm.email" required email #email="ngModel"/>
    <div class="error" *ngIf="email.invalid && (email.touched || formSubmitted)">
          <span *ngIf="email.errors?.['required']">Email is required</span>
          <span *ngIf="email.errors?.['email']">Email must be valid</span>
    </div>
  </ng-container>
  </form>
</nz-modal>

<!-- CHANGE PASSWORD MODAL -->
<nz-modal
  [(nzVisible)]="isPasswordModalVisible"
  nzTitle="Change password"
  (nzOnCancel)="cancelChangePassword()"
  (nzOnOk)="changePassword()"
>
  <ng-container *nzModalContent>
    <label>Old password</label>
    <input nz-input type="password" [(ngModel)]="passwordForm.old_password" />

    <label>New password</label>
    <input nz-input type="password" [(ngModel)]="passwordForm.new_password" />
  </ng-container>
</nz-modal>
